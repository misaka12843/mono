---
title: ç¯å¢ƒé…ç½®ä¸å‘½ä»¤è¡Œä¼˜åŒ–æŒ‡å—
index_img: /img/åŠ©æ‰‹.jpg
banner_img: /img/åŠ©æ‰‹.jpg
date: 2024-09-03 22:02:27
categories: windows
excerpt: æœ¬æ–‡æ˜¯å†™ç»™è‡ªå·±çš„ï¼Œå¦‚æœ‰é”™è¯¯è¯·è°…è§£
---
# ç¯å¢ƒé…ç½®ä¸å‘½ä»¤è¡Œä¼˜åŒ–æŒ‡å—

## SCOOP

`Scoop` æ˜¯ `Windows` å¹³å°ä¸Šçš„å¼€æºåŒ…ç®¡ç†å·¥å…·ï¼Œå†…å«å¤šä¸ªå‚¨å­˜åº“ï¼Œå¹¶ä¸”å’Œ `WinGet` ä¸åŒçš„æ˜¯ `Scoop` æ”¯æŒç¬¬ä¸‰æ–¹å­˜å‚¨åº“ï¼Œä½œä¸ºå¼€æºè½¯ä»¶ï¼Œ`Scoop`çš„ç¬¬ä¸‰æ–¹åº“é€šå¸¸æ˜¯å®‰å…¨çš„

### å®‰è£…å’Œé…ç½®



```powershell
# æŸ¥çœ‹ PowerShell ç‰ˆæœ¬ï¼Œç¡®ä¿ç‰ˆæœ¬å¤§äº 5.1
Get-Host | Select-Object Version

# å…è®¸æ‰§è¡Œ PowerShell è„šæœ¬
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser

# è‡ªå®šä¹‰ Scoop å®‰è£…è·¯å¾„
[Environment]::SetEnvironmentVariable('SCOOP', 'D:\Scoop', 'User')
$env:SCOOP = 'D:\Scoop'

# å®‰è£… Scoop
Invoke-RestMethod -Uri https://get.scoop.sh | Invoke-Expression

# å¦‚æœå®‰è£…å¤±è´¥ï¼Œå°è¯•è®¾ç½®ä»£ç†
# scoop config proxy 127.0.0.1:8080

```
### SCOOPå¸¸ç”¨å‘½ä»¤

```powershell
scoop help # æŸ¥çœ‹å¸®åŠ©
scoop info <app> # æŸ¥çœ‹ APP ä¿¡æ¯
scoop install <app> # å®‰è£… APP
scoop uninstall <app> # å¸è½½ APP
scoop reset [app]@[version] # åˆ‡æ¢ç‰ˆæœ¬
scoop list # åˆ—å‡ºå·²å®‰è£…çš„ APP
scoop search # æœç´¢ APP
scoop search # æ›´å¿«æ›´å¥½çš„æœç´¢ APP
scoop status # æ£€æŸ¥è½¯ä»¶æ›´æ–°
scoop update # æ›´æ–° Scoop è‡ªèº«
scoop update <appName1> <appName2> # æ›´æ–°æŒ‡å®šåº”ç”¨
scoop update * # æ›´æ–°æ‰€æœ‰åº”ç”¨ï¼ˆéœ€åœ¨ apps ç›®å½•ä¸‹æ“ä½œï¼‰
scoop bucket known # åˆ—å‡ºæ‰€æœ‰å·²çŸ¥ bucket
scoop bucket add <bucketName> # æ·»åŠ  bucket
scoop cache rm <app> # ç§»é™¤åº”ç”¨ç¼“å­˜
scoop cache rm * # ç§»é™¤æ‰€æœ‰ç¼“å­˜
scoop cleanup <app> # åˆ é™¤æ—§ç‰ˆæœ¬
```
### SCOOPå¸¸ç”¨å­˜å‚¨åº“

- å®˜æ–¹åº“
  - å­—ä½“ï¼š`scoop bucket add nerd-fonts`
  - å¸¸ç”¨ï¼š`scoop bucket add extras`
  - ä¸åŒç‰ˆæœ¬ï¼š`scoop bucket add versions`

- ç¬¬ä¸‰æ–¹åº“
  - `scoop bucket add .SM https://github.com/okibcn/ScoopMaster`
- ä¸­å›½é•œåƒåº“ï¼ˆèƒ½è®¿é—®GitHubå¯ä»¥ä¸å®‰è£…ï¼‰
  - `scoop bucket add scoop-cn https://github.com/duzyn/scoop-cn`

### SCOOPå¸¸ç”¨è½¯ä»¶

| è½¯ä»¶å                    | ä»‹ç»                                                         |
| ------------------------- | ------------------------------------------------------------ |
| winget                    | ç³»ç»ŸåŒ…ç®¡ç†å™¨                                                 |
| scoop-search              | æ›¿ä»£è‡ªå¸¦æœç´¢ï¼Œæ•ˆæœæ¯”è‡ªå¸¦çš„å¥½å¾ˆå¤š                             |
| chsrc                     | å°†è½¯ä»¶æˆ–ç³»ç»Ÿæ›¿æ¢æœ€å¿«é•œåƒç«™                                   |
| sudo                      | æŸäº›è½¯ä»¶éœ€è¦å®‰è£…è¿™ä¸ª                                         |
| 7zip                      | å‹ç¼©ï¼ˆè‡ªåŠ¨å®‰è£…ï¼‰                                             |
| aria2                     | è‡ªåŠ¨åŠ é€Ÿä¸‹è½½è½¯ä»¶                                             |
| git                       | è‡ªåŠ¨å®‰è£…                                                     |
| nodejs                    | JavaScript                                                   |
| python                    | python                                                       |
| everything-alpha          | æœç´¢å·¥å…·ï¼ˆæ–°ç‰ˆæ”¯æŒå…¨æ–‡æœç´¢ï¼Œåœ¨tools-options-Indwxes/Contentå‹¾é€‰Index file contentç„¶ååœ¨ç¬¬ä¸€ä¸ªæ¡†å†…è®¾ç½®éœ€è¦å…¨æ–‡æœç´¢çš„æ–‡ä»¶æˆ–æ–‡æ¡£ä½ç½®ï¼‰ |
| quicklook                 | ç©ºæ ¼é”®æ”¯æŒé¢„è§ˆæ–‡ä»¶                                           |
| notepad3                  | æ›¿ä»£é»˜è®¤ç¼–è¾‘å™¨                                               |
| pandoc                    | æ–‡æ¡£æ ¼å¼è½¬æ¢ï¼ˆTyporaéœ€è¦ï¼‰                                   |
| picgo                     | è‡ªåŠ¨å°†å›¾ç‰‡ä¸Šä¼ åˆ°è®¾å®šå¥½çš„å›¾åºŠï¼ˆé…åˆTyporaï¼‰                   |
| pixpin                    | æˆªå›¾è´´å›¾OCRæœ¬åœ°è½¯ä»¶ï¼ˆä¸‹è½½1.7.6.0ç‰ˆæœ¬ï¼Œåç»­ç‰ˆæœ¬è¦ä¼šå‘˜ï¼‰       |
| honeyview                 | æŸ¥çœ‹å›¾ç‰‡                                                     |
| magpie                    | å°†ä¸æ”¯æŒå…¨å±æ”¾å¤§çš„æ¸¸æˆä½¿ç”¨win+shift+Aæ”¾å¤§ï¼Œæ”¯æŒå¤šç§æ”¾å¤§ç®—æ³•  |
| wingetui                  | wingetçš„GUIé¡µé¢                                              |
| OfficeToolPlus-Portable   | å®‰è£…office                                                   |
| firacode-NF               | å­—ä½“                                                         |
| SarasaGothic-SC           | å­—ä½“                                                         |
| LXGWNeoXiHei              | å­—ä½“                                                         |
| LXGWWenKai                | å­—ä½“                                                         |
| SourceHanSansCN           | å­—ä½“                                                         |
| SourceHanSerifFont        | å­—ä½“                                                         |
| Wenquanyi-Microhei        | å­—ä½“                                                         |
| Wenquanyi-Zenhei          | å­—ä½“                                                         |
| AdobeSourceHanSerifCnFont | å­—ä½“                                                         |

> æ ¹æ®[[Bug]: inno-setup@6.3.1:è§£å‹é”™è¯¯ # 13444](https://github.com/ScoopInstaller/Extras/issues/13444)ç”±äº`Scoop`ä½¿ç”¨çš„é»˜è®¤`innounp`æœ‰ä¸€äº›é—®é¢˜ä¼šå¯¼è‡´æŸäº›åº”ç”¨æ— æ³•æ­£å¸¸å®‰è£…ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ›¿æ¢ã€‚
>
> ```powershell
> scoop bucket add versions
>  scoop install versions/innounp-unicode
>  scoop uninstall innounp
>  ```

### ä¸€é”®å®‰è£…


``` powershell
# å®‰è£…å¸¸ç”¨è½¯ä»¶
scoop install aria2 scoop-search sudo honeyview chsrc everything-alpha magpie notepad3 pandoc picgo pixpin quicklook winget OfficeToolPlus-Portable

# å®‰è£…å…¨å±€è½¯ä»¶
scoop install -g python winget nodejs

# å®‰è£…å­—ä½“ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
sudo scoop install firacode-NF LXGWWenKai LXGWNeoXiHei Wenquanyi-Microhei SarasaGothic-SC SourceHanSansCN SourceHanSerifFont Wenquanyi-Zenhei AdobeSourceHanSerifCnFont

#åœ¨å®‰è£…è½¯ä»¶åï¼Œå¯ä»¥æŸ¥çœ‹æœ€ä¸‹æ–¹çš„è¾“å‡ºï¼Œä¾‹å¦‚ï¼š
#Notes: Add 7-Zip as a context menu option by running: "<root>\install-context.reg"
#æ³¨æ„: é€šè¿‡è¿è¡Œâ€œ < root > install-context. regâ€æ¥æ·»åŠ 7-Zip ä½œä¸ºä¸Šä¸‹æ–‡èœå•é€‰é¡¹
```

é™„ï¼šå…¨å¹³å°è‡ªåŠ¨æ¢æºå·¥å…·ï¼š[chsrcï¼šå…¨å¹³å°è‡ªåŠ¨æ¢æº](https://github.com/RubyMetric/chsrc)



## POWERSHELLç¾åŒ–[^1]

ç¾åŒ–ä¸€èˆ¬æœ‰ä»¥ä¸‹æ‰‹æ®µï¼šä½¿ç”¨`Oh My Posh`ã€`Starship`ã€æˆ–æ›´æ¢ç»ˆç«¯ä¸º`Terminal`ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œä½¿ç”¨çš„ç»ˆç«¯ç»Ÿä¸€ä¸º[Terminal](https://github.com/microsoft/terminal?tab=readme-ov-file)ï¼Œå­—ä½“ä¸º`FiraCode Nerd Font`ã€‚

### oh-my-posh

`Oh My Posh`æ˜¯ä¸€æ¬¾é€‚ç”¨äºå¤šå¹³å°çš„Shellæ’ä»¶ï¼Œä½†æ˜¯ç”±äº3.0ç‰ˆæœ¬ä½¿ç”¨äº†`Go`è¯­è¨€è¿›è¡Œå¼€å‘ï¼Œå¯åŠ¨æ—¶é—´è¾ƒé•¿ï¼Œä¸å¤ªæ¨èä½¿ç”¨ã€‚

``` powershell
scoop install https://github.com/JanDeDobbeleer/oh-my-posh/releases/latest/download/oh-my-posh.json

# åŠ è½½ oh-my-posh æ¨¡å—å’Œé»˜è®¤ä¸»é¢˜
oh-my-posh init pwsh | Invoke-Expression

# è·å–å…¶ä»–ä¸»é¢˜
Get-PoshThemes

# æ›´æ”¹ä¸»é¢˜
oh-my-posh init pwsh --config "$env:POSH_THEMES_PATH/1_shell.omp.json" | Invoke-Expression

# ä¸ºäº†æ°¸ä¹…ç”Ÿæ•ˆï¼Œå°†ä»¥ä¸‹å‘½ä»¤æ·»åŠ åˆ°é…ç½®æ–‡ä»¶ä¸­
# ç¤ºä¾‹
oh-my-posh init pwsh --config 'C:\Users\misak12843\AppData\Local\Programs\oh-my-posh\themes\clean-detailed.omp.json' | Invoke-Expression
```

### Starship

`Starship` æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„ç»ˆç«¯ç¾åŒ–æ’ä»¶ï¼Œç”¨ `Rust` å¼€å‘ï¼Œå¯åŠ¨æ—¶é—´å¿«ï¼Œå®‰è£…å’Œä½¿ç”¨ç®€å•ã€‚

```powershell
scoop install starship

# åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ 
Invoke-Expression (&starship init powershell)
```

æ›´å¤šé…ç½®è¯·å‚è€ƒ[Starship æ–‡æ¡£](https://starship.rs/zh-CN/config/).



### Terminal-Icons

`Terminal-Icons` æ˜¯ä¸€ä¸ªä¸º PowerShell æ˜¾ç¤ºæ–‡ä»¶ç±»å‹å›¾æ ‡çš„æ¨¡å—ï¼Œä¾èµ– `Nerd Fonts`

```powershell
# å®‰è£… Terminal-Icons
scoop install terminal-icons

# å¯¼å…¥æ¨¡å—
Import-Module -Name Terminal-Icons
Show-TerminalIconsTheme
```

æœ€åå‘ˆç°å‡ºæ¥çš„æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š

| æ›´æ”¹å‰    | æ›´æ”¹å         |
| --------- | -------------- |
| Desktop   | `ó°Ÿ€  Desktop`   |
| Documents | `ï  Documents` |
| Pictures  | `ó°‰  Pictures ` |

> å¦‚æœä½ çš„`ó°Ÿ€ `æ˜¾ç¤ºçš„ä¸æ˜¯ç”µè„‘å›¾æ ‡ï¼Œé‚£ä¹ˆä½ éœ€è¦å°†æµè§ˆå™¨ä¸­å®½åº¦å›ºå®šçš„å­—ä½“æ›´æ”¹ä¸ºnerd-font

`posh-git`æ˜¯ä¸€ä¸ªå°†`Git`çŠ¶æ€æ·»åŠ åœ¨`PowerShell`çš„æ’ä»¶ï¼Œé€šè¿‡å®ƒå¯ä»¥ç›´è§‚çš„çœ‹åˆ°å½“å‰ç›®å½•çš„åˆ†æ”¯ä»¥åŠæ–‡ä»¶çš„çŠ¶æ€ã€‚å¦å¤–è¿˜å¢åŠ äº†ä¸€äº›é’ˆå¯¹`Git`çš„è¡¥å…¨åŠŸèƒ½ã€‚

å®‰è£…`posh-git`éå¸¸ç®€å•ï¼Œåªéœ€è¦ä½¿ç”¨`scoop install posh-git`å°±å¯ä»¥è‡ªåŠ¨å®Œæˆå®‰è£…ï¼Œè€Œä¸”ä¸éœ€è¦ä¿®æ”¹`PowerShell`çš„é…ç½®æ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯ç»ˆç«¯æ•ˆæœï¼š

`````shell
fluid on î‚  master is ğŸ“¦ v1.9.8 via îœ˜ v22.7.0
â¯ Hello,World
`````

### z.lua

`z.lua` æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„ç›®å½•è·³è½¬å·¥å…·ï¼Œç”¨ Lua å®ç°ï¼Œå®ƒæ ¹æ®ä½ çš„ä½¿ç”¨é¢‘ç‡è®°å½•è®¿é—®è¿‡çš„ç›®å½•ï¼Œä¹‹åå¯ä»¥å¿«é€Ÿè·³è½¬åˆ°è¿™äº›ç›®å½•ã€‚

`scoop install lua`

ç„¶åéœ€è¦ä¸‹è½½ `z.lua` é¡¹ç›®ï¼Œè¿™é‡Œæ¨èç›´æ¥ç”¨ `git` å°†é¡¹ç›®å…‹éš†åˆ°ç”¨æˆ·ä¸»ç›®å½•ä¸‹ã€‚

`git clone https://github.com/skywind3000/z.lua.git $HOME/z.lua`

ç„¶ååœ¨`$PROFILE `ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼Œè¿™æ ·ä»¥ååœ¨ä½¿ç”¨ç»ˆç«¯çš„æ—¶å€™éƒ½å¯ä»¥ç”¨ z å‘½ä»¤æ¥å®ç°è·³è½¬äº†ã€‚
``` powershell
#è¿›å…¥é…ç½®æ–‡ä»¶
notepad $PROFILE
#æ·»åŠ zæ’ä»¶è¿›å…¥powershell
Invoke-Expression (& { (lua $HOME/z.lua/z.lua --init powershell once enhanced) -join "`n" })

# å½“ä½ æˆåŠŸæ·»åŠ äº†z.luaåï¼Œå¯ä»¥è¯•è¯•ä»¥ä¸‹æ“ä½œï¼š

# é¦–å…ˆéœ€è¦åœ¨ç»ˆç«¯ä¸­åˆ‡æ¢å‡ æ¬¡ä¸åŒçš„ç›®å½•ï¼Œabæ˜¯ä¸¤ä¸ªè·¯å¾„ä¸åŒçš„ç›®å½•
cd a
cd b
# ç„¶åz.luaå°±ä¼šè®°ä½åˆ‡æ¢çš„é€‰æ‹©ï¼Œä¸‹æ¬¡ç›´æ¥è¾“å…¥ç›®å½•åç”šè‡³ä¸€éƒ¨åˆ†å³å¯å®ç°è·³è½¬
z a
z b
```

é…ç½®å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¿«é€Ÿè·³è½¬åˆ°æœ€è¿‘è®¿é—®è¿‡çš„ç›®å½•ï¼š

`z <éƒ¨åˆ†ç›®å½•å>`

ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ€è¿‘è®¿é—®è¿‡ `C:\Users\Username\Documents\Projects\MyProject`ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è·³è½¬ï¼š

`z MyProject`æˆ–è€…`z my`

`z.lua` ä¼šè‡ªåŠ¨åŒ¹é…å¹¶è·³è½¬åˆ°ä½ æœ€å¸¸è®¿é—®çš„ç›®å½•ï¼Œéå¸¸æ–¹ä¾¿ã€‚

### PSReadLine

`PSReadLine` æ˜¯ä¸€ä¸ªç”¨äºå¢å¼º PowerShell æ§åˆ¶å°ç”¨æˆ·ä½“éªŒçš„æ¨¡å—ã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„å‘½ä»¤è¡Œç¼–è¾‘åŠŸèƒ½ã€å‘½ä»¤å†å²è®°å½•ç®¡ç†ï¼Œä»¥åŠé”®ç»‘å®šå®šåˆ¶ã€‚å®‰è£…å’Œé…ç½® `PSReadLine` å¯ä»¥æ˜¾è‘—æå‡ä½ åœ¨ PowerShell ä¸­çš„å·¥ä½œæ•ˆç‡ã€‚

ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…`PSReadLine` 

`Install-Module -Name PSReadLine -Force -SkipPublisherCheck`

`-Force` å‚æ•°ç¡®ä¿è¦†ç›–ä»»ä½•å·²å®‰è£…çš„ç‰ˆæœ¬ï¼Œ`-SkipPublisherCheck` åˆ™è·³è¿‡å‘å¸ƒè€…æ£€æŸ¥ï¼Œä»¥ä¾¿é¡ºåˆ©å®‰è£…ã€‚

å®‰è£…å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡è‡ªå®šä¹‰é…ç½®æ–‡ä»¶æ¥é…ç½®å®ƒï¼Œä»¥ä¸‹æ˜¯æ¨èé…ç½®ï¼Œä½ å¯ä»¥åœ¨[è¿™ä¸ªé“¾æ¥](https://learn.microsoft.com/en-us/powershell/module/psreadline/set-psreadlineoption?view=powershell-7.4)æ‰¾åˆ°å…³äºé…ç½®æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚

``` powershell
Import-Module PSReadLine
Set-PSReadLineOption -EditMode Windows
# å…¶ä»–é€‰é¡¹ï¼š-EditMode Emacs ï¼ˆEmacsé£æ ¼çš„å¿«æ·é”®ï¼‰
#         -EditMode Vi	   (Vimç”¨æˆ·ç‹‚å–œ)
Set-PSReadLineOption -PredictionSource HistoryAndPlugin
# å…¶ä»–é€‰é¡¹ï¼š-PredictionSource Noneï¼ˆå…³é—­è‡ªåŠ¨è¡¥å…¨é¢„æµ‹ï¼‰ã€-PredictionSource Historyï¼ˆä»…ä½¿ç”¨å†å²è®°å½•ï¼‰

# è®¾å®šé¢„æµ‹ç»“æœçš„æ˜¾ç¤ºæ ·å¼ä¸ºåˆ—è¡¨è§†å›¾
Set-PSReadLineOption -PredictionViewStyle ListView
# å…¶ä»–é€‰é¡¹ï¼š-PredictionViewStyle InlineViewï¼ˆå†…è”æ˜¾ç¤ºé¢„æµ‹ç»“æœï¼‰
Set-PSReadLineOption -BellStyle None
# ç»‘å®šCtrl+då¿«æ·é”®ï¼Œç”¨äºåˆ é™¤å…‰æ ‡å¤„çš„å­—ç¬¦
Set-PSReadLineKeyHandler -Chord 'Ctrl+d' -Function DeleteChar
```

## é™„è®°

ä»¥ä¸‹æ˜¯è‡ªç”¨çš„`Powershell`é…ç½®ï¼Œä¸€ä¸ªæ˜¯`Oh My Posh`ï¼Œå¦ä¸€ä¸ªæ˜¯`Starship`


``` powershell
# oh-my-posh åˆå§‹åŒ–
oh-my-posh init pwsh --config 'C:\Users\misak12843\AppData\Local\Programs\oh-my-posh\themes\clean-detailed.omp.json' | Invoke-Expression
set-alias -name ll -value ls
set-alias -name sc -value scoop-search
set-alias -name s -value scoop
Import-Module -Name Terminal-Icons

# z.lua åˆå§‹åŒ–
Invoke-Expression (& { (lua $HOME/z.lua/z.lua --init powershell once enhanced) -join "`n" })
Import-Module PSReadLine
Set-PSReadLineOption -EditMode Vi
Set-PSReadLineOption -PredictionSource HistoryAndPlugin
Set-PSReadLineOption -PredictionViewStyle ListView
Set-PSReadLineOption -BellStyle None
Set-PSReadLineKeyHandler -Chord 'Ctrl+d' -Function DeleteChar

# ssh-agent åˆå§‹åŒ–
$envFile = "$HOME\.ssh\agent.env"
if (Test-Path $envFile) {
    Get-Content $envFile | ForEach-Object { Invoke-Expression $_ }
}

if (-not $env:SSH_AUTH_SOCK -or (ssh-add -l 2>&1 | Out-Null)) {
    ssh-agent | ForEach-Object {
        if ($_ -match "SSH_AUTH_SOCK=(.*);") {
            $env:SSH_AUTH_SOCK = $matches[1]
        }
    }
    ssh-add
}

# æ¸…ç†å˜é‡
Remove-Variable -Name envFile
```

```powershell
#å…¶ä»–ç‰ˆæœ¬
set-alias -name ll -value ls
set-alias -name sc -value scoop-search
set-alias -name s -value scoop

# starship åˆå§‹åŒ–
$ENV:STARSHIP_CONFIG = "$HOME\.config\starship\gruvbox-rainbow.toml"
Invoke-Expression (& starship init powershell)
Import-Module -Name Terminal-Icons

# z.lua åˆå§‹åŒ–
Invoke-Expression (& { (lua $HOME/z.lua/z.lua --init powershell once enhanced) -join "`n" })
Import-Module PSReadLine
Set-PSReadLineOption -EditMode Vi
Set-PSReadLineOption -PredictionSource HistoryAndPlugin
Set-PSReadLineOption -PredictionViewStyle ListView
Set-PSReadLineOption -BellStyle None
Set-PSReadLineKeyHandler -Chord 'Ctrl+d' -Function DeleteChar

# ssh-agent åˆå§‹åŒ–
$envFile = "$HOME\.ssh\agent.env"
if (Test-Path $envFile) {
    Get-Content $envFile | ForEach-Object { Invoke-Expression $_ }
}

if (-not $env:SSH_AUTH_SOCK -or (ssh-add -l 2>&1 | Out-Null)) {
    ssh-agent | ForEach-Object {
        if ($_ -match "SSH_AUTH_SOCK=(.*);") {
            $env:SSH_AUTH_SOCK = $matches[1]
        }
    }
    ssh-add
}

# æ¸…ç†å˜é‡
Remove-Variable -Name envFile
```

---

æ³¨ï¼š

[^1]:å‚è€ƒæ–‡ç« ï¼š[é…ç½®å’Œç¾åŒ–ä½ çš„powershellç»ˆç«¯ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/444165353#CTZ_BASIS)
[^2]:é…ç½®æ¥è‡ªï¼š[ä½¿ç”¨ starship ç»Ÿä¸€ cmd, powershell, git bash ç­‰æ ·å¼ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/674148271)
